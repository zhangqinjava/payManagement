# account-service

## 1. 项目简介

account-service 是一个 **高并发、安全、可扩展的账户资金模块**，  
用于支撑支付系统中的 **余额管理、冻结/解冻、转账、账务流水记录** 等核心能力。
该模块适用于：
- 支付系统
- 清结算系统
- 资金中台
- 风控冻结场景
## 2. 核心能力

-  账户余额管理（可用余额 / 冻结余额）
-  账户冻结 / 解冻（支持部分冻结、部分解冻）
-  账户转账（双账户一致性）
-  账务流水 & 明细记录
-  高并发下资金安全保证
-  支持分布式部署

## 3. 账户资金模型
### 3.1 账户字段说明
```text
 balance         账户账面余额（不直接减少）
frozen_balance  冻结金额
available       可用余额 = balance - frozen_balance
```
### 3.2 设计原则
 冻结 ≠ 扣款
 所有资金操作使用 SQL 原子校验
 禁止「先查余额 → 再更新」
## 4. 并发与一致性设计
使用 Redisson 分布式锁
多账户操作使用 MultiLock
锁在事务开始前获取，事务完成后释放
所有资金更新使用 单条 SQL 原子更新
## 5. 技术栈
Java 1.8+
Spring Boot
MyBatis-Plus
MySQL
Redisson
Lombok
## 6. 注意事项
所有金额字段使用 BigDecimal
所有冻结 / 解冻操作必须保证幂等
禁止绕过账户模块直接更新账户表
